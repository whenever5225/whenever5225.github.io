---
title: PAT乙级1027 || 打印沙漏（详解，C/C++示例，测试点分析）
date: 2019-09-06 12:08:19
tags:
- PAT
- C/C++
- 编程
categories:
- PAT
---

# **打印沙漏**
## **题目描述**
本题要求你写个程序把给定的符号打印成沙漏的形状。例如给定17个“*”，要求按下列格式打印

```null
*****
 ***
  *
 ***
*****
```

所谓“沙漏形状”，是指每行输出奇数个符号；各行符号中心对齐；相邻两行符号数差2；符号数先从大到小顺序递减到1，再从小到大顺序递增；首尾符号数相等。
给定任意N个符号，不一定能正好组成一个沙漏。要求打印出的沙漏能用掉尽可能多的符号。

## **输入格式**
输入在一行给出1个正整数N（≤1000）和一个符号，中间以空格分隔。
## **输出格式**
首先打印出由给定符号组成的最大的沙漏形状，最后在一行中输出剩下没用掉的符号数。
## **输入样例**
```null
19 *
```
## **输出样例**
```null
*****
 ***
  *
 ***
*****
2
```

## 问题解决
### 解题思想
本题为典型的图形输出问题，此类问题处理的核心是：找规律。由题给示例我们可以得到如下规律（滑动以查看完整内容）：
```
行数为1时，需1个符号，即：1
行数为3时，需7个符号，即：1+2X3
行数为5时，需17个符号，即：1+2X3+2X5
......
行数为i时，需要的符号数为：1+2X3+...+2Xi
```
由此，很容易得出本题的处理方案，如下：
设need_num为打印沙漏需要的最多符号个数，level为能打印的沙漏的最大层数，它们都初始化为1，因为N是正整数，因此至少能打印出一层；注意在读入字符前要吸收掉空格；在代码的while()循环中，不断地累加层数level，进而累加需要的符号数need_num，退出循环时要把多累加一次扣除掉；然后，根据规律，先打印沙漏的上半部分及中心层，注意还要控制空格的输出，再打印沙漏的下半部分，核心部分就是找到各部分的相应行打印空格数和符号数与level，i的关系。
### 代码示例（C/C++）

```cpp
#include <cstdio>
using namespace std;
int main()
{
    int n,c,level = 1;//level为能打印的沙漏的最大层数，初始化为1
    int need_num = 1;//need_num为打印沙漏需要的符号个数
    scanf("%d",&n);//输入字符个数
    getchar();//吸收掉空格
    c = getchar();//输入字符
    while(n / need_num){//计算n个符号所能打印的“最大沙漏”（用掉的符号尽可能多，层数最大）
        level += 2;
        need_num += 2 * level;
    }
    need_num -= 2 * level;//退出循环时最多需要的符号个数多加了一次
    level -= 2;//退出循环时层数多加了一次（注意与上一行的顺序，不可颠倒）
    for(int i = level; i >= level / 2 + 1; i--){//先打印沙漏的上半部分及中心部分
        for(int k = 0; k < level - i; k++){//打印空格
            printf(" ");
        }
        for(int j = 0; j < 2 * i - level; j++){//打印符号
            printf("%c",c);
        }
        printf("\n");
    }
    for(int i = level / 2; i >= 1; i--){//再打印沙漏的下半部分
        for(int k = 0; k < i - 1; k++){//打印空格
            printf(" ");
        }
        for(int j = 0; j < level - 2 * (i - 1); j++){//打印符号
            printf("%c",c);
        }
        printf("\n");
    }
    printf("%d",n - need_num);//输出剩下没用掉的符号数
    return 0;
}
```

>题目来源：PAT乙级1027
>作者：CHEN, Yue
>单位：浙江大学